<h1>{{ quest.title }}</h1>

<form method="post">
    {% csrf_token %}
    {% for question, form in forms %}
        <div class="question">
            <p>{{ question.question_text }}:</p>
            {% if question.image %}
                <img src="{{ question.image.url }}" alt="Question Image" style="max-width: 300px;">
            {% endif %}
            
            <form method="post">
                {% csrf_token %}
                {{ form.as_p }}
                <input type="hidden" name="question_id" value="{{ question.id }}">
                <button type="submit">Ответ</button>
            </form>

            {% if form.is_correct is not None %}
                <p class="response-message">
                    {{ form.response_text }} 
                    {% if form.is_correct %}
                        (Верно!)
                    {% else %}
                        (Неверно!)
                    {% endif %}
                </p>
                <!-- Отображение изображения после правильного ответа -->
                {% if form.is_correct and question.success_image %}
                    <img src="{{ question.success_image.url }}" alt="Success Image" style="max-width: 300px; margin-top: 10px;">
                {% endif %}
            {% endif %}
        </div>
    {% endfor %}
</form>

<!-- Отдельная форма для сброса прогресса квеста -->
<form method="post" style="margin-top: 20px;">
    {% csrf_token %}
    <button type="submit" name="restart" value="true">Начать заново</button>
</form>

<!-- Кнопка возврата в профиль, доступная всегда -->
<a href="{% url 'profile' %}" class="btn btn-primary" style="margin-top: 20px;">Вернуться в профиль</a>

{% if quest_progress.is_completed %}
    <p>Вы уже прошли этот квест.</p>
{% endif %}




















